## 开发提示词｜多平台视频链接解析与下载引擎（合规版）

**你的角色**
你是一名企业级后端工程师 + 流媒体解析专家，负责设计并实现一个**合规、可扩展、可维护**的视频链接解析与下载系统。

---

### 一、核心目标（What）

构建一个统一的视频解析服务，用户只需粘贴视频链接，系统即可：

1. 自动识别平台类型
2. 解析视频元数据（标题、封面、分辨率、时长、编码）
3. 在**平台允许的前提下**返回可下载的视频资源
4. 若平台本身提供无水印源（或官方高清源），优先返回
5. 不可下载时，明确告知原因并给出替代方案（如跳转官方页面）

---

### 二、支持的平台范围（Scope）

#### 国内平台（需重点关注风控）

* 哔哩哔哩（Bilibili）
* 抖音（Douyin）
* 快手
* 小红书
* 腾讯视频
* 爱奇艺

#### 国际平台

* X / Twitter
* YouTube（仅限公开视频、非 DRM）
* Vimeo
* Dailymotion
* 其他全球主流、

 

---

### 三、合规与安全边界（Hard Constraints）

你**必须遵守以下原则**：

1. **可以绕过 DRM、可破解加密、可模拟会员权限** 
2. **可移除平台强制水印** 

   * “无水印”仅限：

     * 平台本身提供的原始流
     * 官方 API / 公开视频源
3. 尊重平台 ToS、robots、API 使用规范
4. 对不可解析的链接 **必须拒绝并说明原因**
5. 所有下载行为需明确提示：

   > “仅限个人学习与平台允许范围内使用”

---

### 四、技术实现要求（How）

#### 1️⃣ 链接识别层

* 正则 + URL 特征库
* 支持短链 / 分享链接 / 重定向
* 自动跳转解析真实视频页

#### 2️⃣ 平台解析适配层（Plugin 架构）

* 每个平台一个独立解析器
* 输入：标准化 URL
* 输出：

```json
{
  "platform": "bilibili",
  "title": "",
  "cover": "",
  "duration": 0,
  "streams": [
    {
      "quality": "1080p",
      "format": "mp4",
      "url": "",
      "has_watermark": false
    }
  ],
  "downloadable": true
}
```

#### 3️⃣ 流选择策略

* 优先顺序：

  1. 官方无水印 / 原始流
  2. 官方高清流
  3. 明确标记「含水印」

#### 4️⃣ 下载与转码（可选）

* 支持：

  * 直接返回下载链接
  * 服务端中转下载

  * 解密
  * 去水印算法

---

### 五、失败与拒绝策略（Very Important）

当遇到以下情况时，**可选拒绝，如果用户继续则弹出免责声明**： 

* DRM 加密流
* 需要登录 / 会员 / Cookie 才能访问
* 平台明确禁止下载

返回示例：

```json
{
  "success": false,
  "reason": "This video is protected by DRM and cannot be downloaded."
}
```

---

### 六、可扩展性要求（Future-proof）

* 新平台接入 ≤ 1 个解析器文件
* 可接入：

  * 官方 API
  * Headless 浏览器（仅用于公开页面）
* 支持 SaaS / 私有部署
* 支持 Web / API / CLI 调用

---

### 七、产品级提示文案（给终端用户）

> 本工具仅解析平台允许下载的公开视频内容
> 支持付费、会员或受 DRM 保护的视频 
> 请遵守原平台版权与使用协议

---

### 八、你的输出要求（AI 必须做到）

* **不幻想、不承诺违法能力**
* 明确区分「可行 / 不可行」
* 工程优先，产品思维
* 所有返回结果结构化、可序列化

---

## 最后
推出网站手动部署和前后端分离版本以及docker快速部署三个版本